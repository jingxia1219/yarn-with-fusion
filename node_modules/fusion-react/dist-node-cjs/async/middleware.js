"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _prepareProvider = _interopRequireDefault(require("./prepare-provider"));

var _jsxRuntime = require("react/jsx-runtime");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * 
 */
const middleware = function (ctx, next) {
  if (process.env.NODE_ENV !== "production") {
    // eslint-disable-next-line no-console
    console.warn('The {middleware} export from fusion-react is deprecated.');
  }

  if (true && !ctx.element) {
    return next();
  }

  const markAsCritical = true ? chunkId => {
    // Push to legacy context for backwards compat w/ legacy SSR template
    ctx.preloadChunks.push(chunkId);
  } : noop;
  ctx.element = /*#__PURE__*/(0, _jsxRuntime.jsx)(_prepareProvider.default, {
    markAsCritical: markAsCritical,
    children: ctx.element
  });
  return next();
};

var _default = middleware;
exports.default = _default;

function noop() {}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hc3luYy9taWRkbGV3YXJlLmpzIl0sIm5hbWVzIjpbIm1pZGRsZXdhcmUiLCJjdHgiLCJuZXh0IiwiY29uc29sZSIsIndhcm4iLCJlbGVtZW50IiwibWFya0FzQ3JpdGljYWwiLCJjaHVua0lkIiwicHJlbG9hZENodW5rcyIsInB1c2giLCJub29wIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBUUE7O0FBSUE7Ozs7Ozs7Ozs7QUFaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBLE1BQU1BLFVBQXNCLEdBQUcsVUFBVUMsR0FBVixFQUFlQyxJQUFmLEVBQXFCO0FBQ2xELDZDQUFhO0FBQ1g7QUFDQUMsSUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsMERBQWI7QUFDRDs7QUFFRCxNQUFJLFFBQVksQ0FBQ0gsR0FBRyxDQUFDSSxPQUFyQixFQUE4QjtBQUM1QixXQUFPSCxJQUFJLEVBQVg7QUFDRDs7QUFFRCxRQUFNSSxjQUFjLEdBQUcsT0FDbEJDLE9BQUQsSUFBYTtBQUNYO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ08sYUFBSixDQUFrQkMsSUFBbEIsQ0FBdUJGLE9BQXZCO0FBQ0QsR0FKa0IsR0FLbkJHLElBTEo7QUFNQVQsRUFBQUEsR0FBRyxDQUFDSSxPQUFKLGdCQUNFLHFCQUFDLHdCQUFEO0FBQWlCLElBQUEsY0FBYyxFQUFFQyxjQUFqQztBQUFBLGNBQ0dMLEdBQUcsQ0FBQ0k7QUFEUCxJQURGO0FBS0EsU0FBT0gsSUFBSSxFQUFYO0FBQ0QsQ0F0QkQ7O2VBd0JlRixVOzs7QUFFZixTQUFTVSxJQUFULEdBQWdCLENBQUUiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQ29weXJpZ2h0IChjKSAyMDE4IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB0eXBlIHtNaWRkbGV3YXJlfSBmcm9tICdmdXNpb24tY29yZSc7XG5cbmltcG9ydCBQcmVwYXJlUHJvdmlkZXIgZnJvbSAnLi9wcmVwYXJlLXByb3ZpZGVyJztcblxuY29uc3QgbWlkZGxld2FyZTogTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChjdHgsIG5leHQpIHtcbiAgaWYgKF9fREVWX18pIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUud2FybignVGhlIHttaWRkbGV3YXJlfSBleHBvcnQgZnJvbSBmdXNpb24tcmVhY3QgaXMgZGVwcmVjYXRlZC4nKTtcbiAgfVxuXG4gIGlmIChfX05PREVfXyAmJiAhY3R4LmVsZW1lbnQpIHtcbiAgICByZXR1cm4gbmV4dCgpO1xuICB9XG5cbiAgY29uc3QgbWFya0FzQ3JpdGljYWwgPSBfX05PREVfX1xuICAgID8gKGNodW5rSWQpID0+IHtcbiAgICAgICAgLy8gUHVzaCB0byBsZWdhY3kgY29udGV4dCBmb3IgYmFja3dhcmRzIGNvbXBhdCB3LyBsZWdhY3kgU1NSIHRlbXBsYXRlXG4gICAgICAgIGN0eC5wcmVsb2FkQ2h1bmtzLnB1c2goY2h1bmtJZCk7XG4gICAgICB9XG4gICAgOiBub29wO1xuICBjdHguZWxlbWVudCA9IChcbiAgICA8UHJlcGFyZVByb3ZpZGVyIG1hcmtBc0NyaXRpY2FsPXttYXJrQXNDcml0aWNhbH0+XG4gICAgICB7Y3R4LmVsZW1lbnR9XG4gICAgPC9QcmVwYXJlUHJvdmlkZXI+XG4gICk7XG4gIHJldHVybiBuZXh0KCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBtaWRkbGV3YXJlO1xuXG5mdW5jdGlvbiBub29wKCkge31cbiJdfQ==