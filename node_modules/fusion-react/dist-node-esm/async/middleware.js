/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * 
 */
import * as React from 'react';
import PrepareProvider from './prepare-provider';
import { jsx as _jsx } from "react/jsx-runtime";

const middleware = function (ctx, next) {
  if (process.env.NODE_ENV !== "production") {
    // eslint-disable-next-line no-console
    console.warn('The {middleware} export from fusion-react is deprecated.');
  }

  if (true && !ctx.element) {
    return next();
  }

  const markAsCritical = true ? chunkId => {
    // Push to legacy context for backwards compat w/ legacy SSR template
    ctx.preloadChunks.push(chunkId);
  } : noop;
  ctx.element = /*#__PURE__*/_jsx(PrepareProvider, {
    markAsCritical: markAsCritical,
    children: ctx.element
  });
  return next();
};

export default middleware;

function noop() {}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hc3luYy9taWRkbGV3YXJlLmpzIl0sIm5hbWVzIjpbIlJlYWN0IiwiUHJlcGFyZVByb3ZpZGVyIiwibWlkZGxld2FyZSIsImN0eCIsIm5leHQiLCJjb25zb2xlIiwid2FybiIsImVsZW1lbnQiLCJtYXJrQXNDcml0aWNhbCIsImNodW5rSWQiLCJwcmVsb2FkQ2h1bmtzIiwicHVzaCIsIm5vb3AiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsT0FBTyxLQUFLQSxLQUFaLE1BQXVCLE9BQXZCO0FBSUEsT0FBT0MsZUFBUCxNQUE0QixvQkFBNUI7OztBQUVBLE1BQU1DLFVBQXNCLEdBQUcsVUFBVUMsR0FBVixFQUFlQyxJQUFmLEVBQXFCO0FBQ2xELDZDQUFhO0FBQ1g7QUFDQUMsSUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsMERBQWI7QUFDRDs7QUFFRCxNQUFJLFFBQVksQ0FBQ0gsR0FBRyxDQUFDSSxPQUFyQixFQUE4QjtBQUM1QixXQUFPSCxJQUFJLEVBQVg7QUFDRDs7QUFFRCxRQUFNSSxjQUFjLEdBQUcsT0FDbEJDLE9BQUQsSUFBYTtBQUNYO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ08sYUFBSixDQUFrQkMsSUFBbEIsQ0FBdUJGLE9BQXZCO0FBQ0QsR0FKa0IsR0FLbkJHLElBTEo7QUFNQVQsRUFBQUEsR0FBRyxDQUFDSSxPQUFKLGdCQUNFLEtBQUMsZUFBRDtBQUFpQixJQUFBLGNBQWMsRUFBRUMsY0FBakM7QUFBQSxjQUNHTCxHQUFHLENBQUNJO0FBRFAsSUFERjtBQUtBLFNBQU9ILElBQUksRUFBWDtBQUNELENBdEJEOztBQXdCQSxlQUFlRixVQUFmOztBQUVBLFNBQVNVLElBQVQsR0FBZ0IsQ0FBRSIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBDb3B5cmlnaHQgKGMpIDIwMTggVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHR5cGUge01pZGRsZXdhcmV9IGZyb20gJ2Z1c2lvbi1jb3JlJztcblxuaW1wb3J0IFByZXBhcmVQcm92aWRlciBmcm9tICcuL3ByZXBhcmUtcHJvdmlkZXInO1xuXG5jb25zdCBtaWRkbGV3YXJlOiBNaWRkbGV3YXJlID0gZnVuY3Rpb24gKGN0eCwgbmV4dCkge1xuICBpZiAoX19ERVZfXykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS53YXJuKCdUaGUge21pZGRsZXdhcmV9IGV4cG9ydCBmcm9tIGZ1c2lvbi1yZWFjdCBpcyBkZXByZWNhdGVkLicpO1xuICB9XG5cbiAgaWYgKF9fTk9ERV9fICYmICFjdHguZWxlbWVudCkge1xuICAgIHJldHVybiBuZXh0KCk7XG4gIH1cblxuICBjb25zdCBtYXJrQXNDcml0aWNhbCA9IF9fTk9ERV9fXG4gICAgPyAoY2h1bmtJZCkgPT4ge1xuICAgICAgICAvLyBQdXNoIHRvIGxlZ2FjeSBjb250ZXh0IGZvciBiYWNrd2FyZHMgY29tcGF0IHcvIGxlZ2FjeSBTU1IgdGVtcGxhdGVcbiAgICAgICAgY3R4LnByZWxvYWRDaHVua3MucHVzaChjaHVua0lkKTtcbiAgICAgIH1cbiAgICA6IG5vb3A7XG4gIGN0eC5lbGVtZW50ID0gKFxuICAgIDxQcmVwYXJlUHJvdmlkZXIgbWFya0FzQ3JpdGljYWw9e21hcmtBc0NyaXRpY2FsfT5cbiAgICAgIHtjdHguZWxlbWVudH1cbiAgICA8L1ByZXBhcmVQcm92aWRlcj5cbiAgKTtcbiAgcmV0dXJuIG5leHQoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1pZGRsZXdhcmU7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuIl19