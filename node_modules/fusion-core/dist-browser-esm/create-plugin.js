/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * 
 */
import { captureStackTrace } from './stack-trace.js';
import { createPlugin as compatCreatePlugin } from './legacy-compat.js';
export function createPlugin(opts) {
  // Inject the legacy plugin properties for compatibiity purposes.
  // However, we should eventually get rid of these properties and possibly
  // instead just represent plugins as plain generator functions.
  return { ...opts,
    __plugin__: true,
    __fn__: compatCreatePlugin(opts),
    stack: captureStackTrace(createPlugin)
  };
}
export function declarePlugin(fn) {
  fn.__fplugin__ = true;
  return fn;
}
export function getPluginFn(val) {
  if (val && val.__plugin__ && val.__fn__) {
    return val.__fn__;
  }

  if (val && val.__fplugin__) {
    return val;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9jcmVhdGUtcGx1Z2luLmpzIl0sIm5hbWVzIjpbImNhcHR1cmVTdGFja1RyYWNlIiwiY3JlYXRlUGx1Z2luIiwiY29tcGF0Q3JlYXRlUGx1Z2luIiwib3B0cyIsIl9fcGx1Z2luX18iLCJfX2ZuX18iLCJzdGFjayIsImRlY2xhcmVQbHVnaW4iLCJmbiIsIl9fZnBsdWdpbl9fIiwiZ2V0UGx1Z2luRm4iLCJ2YWwiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsU0FBUUEsaUJBQVIsUUFBZ0Msa0JBQWhDO0FBRUEsU0FBUUMsWUFBWSxJQUFJQyxrQkFBeEIsUUFBaUQsb0JBQWpEO0FBRUEsT0FBTyxTQUFTRCxZQUFULENBQXNCRSxJQUF0QixFQUE0QjtBQUNqQztBQUNBO0FBQ0E7QUFDQSxTQUFPLEVBQ0wsR0FBR0EsSUFERTtBQUVMQyxJQUFBQSxVQUFVLEVBQUUsSUFGUDtBQUdMQyxJQUFBQSxNQUFNLEVBQUVILGtCQUFrQixDQUFDQyxJQUFELENBSHJCO0FBSUxHLElBQUFBLEtBQUssRUFBRU4saUJBQWlCLENBQUNDLFlBQUQ7QUFKbkIsR0FBUDtBQU1EO0FBRUQsT0FBTyxTQUFTTSxhQUFULENBQXVCQyxFQUF2QixFQUEyQjtBQUNoQ0EsRUFBQUEsRUFBRSxDQUFDQyxXQUFILEdBQWlCLElBQWpCO0FBQ0EsU0FBT0QsRUFBUDtBQUNEO0FBRUQsT0FBTyxTQUFTRSxXQUFULENBQXFCQyxHQUFyQixFQUEwQjtBQUMvQixNQUFJQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ1AsVUFBWCxJQUF5Qk8sR0FBRyxDQUFDTixNQUFqQyxFQUF5QztBQUN2QyxXQUFPTSxHQUFHLENBQUNOLE1BQVg7QUFDRDs7QUFDRCxNQUFJTSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0YsV0FBZixFQUE0QjtBQUMxQixXQUFPRSxHQUFQO0FBQ0Q7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBDb3B5cmlnaHQgKGMpIDIwMTggVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAbm9mbG93XG4gKi9cblxuaW1wb3J0IHtjYXB0dXJlU3RhY2tUcmFjZX0gZnJvbSAnLi9zdGFjay10cmFjZS5qcyc7XG5cbmltcG9ydCB7Y3JlYXRlUGx1Z2luIGFzIGNvbXBhdENyZWF0ZVBsdWdpbn0gZnJvbSAnLi9sZWdhY3ktY29tcGF0LmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBsdWdpbihvcHRzKSB7XG4gIC8vIEluamVjdCB0aGUgbGVnYWN5IHBsdWdpbiBwcm9wZXJ0aWVzIGZvciBjb21wYXRpYmlpdHkgcHVycG9zZXMuXG4gIC8vIEhvd2V2ZXIsIHdlIHNob3VsZCBldmVudHVhbGx5IGdldCByaWQgb2YgdGhlc2UgcHJvcGVydGllcyBhbmQgcG9zc2libHlcbiAgLy8gaW5zdGVhZCBqdXN0IHJlcHJlc2VudCBwbHVnaW5zIGFzIHBsYWluIGdlbmVyYXRvciBmdW5jdGlvbnMuXG4gIHJldHVybiB7XG4gICAgLi4ub3B0cyxcbiAgICBfX3BsdWdpbl9fOiB0cnVlLFxuICAgIF9fZm5fXzogY29tcGF0Q3JlYXRlUGx1Z2luKG9wdHMpLFxuICAgIHN0YWNrOiBjYXB0dXJlU3RhY2tUcmFjZShjcmVhdGVQbHVnaW4pLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVjbGFyZVBsdWdpbihmbikge1xuICBmbi5fX2ZwbHVnaW5fXyA9IHRydWU7XG4gIHJldHVybiBmbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBsdWdpbkZuKHZhbCkge1xuICBpZiAodmFsICYmIHZhbC5fX3BsdWdpbl9fICYmIHZhbC5fX2ZuX18pIHtcbiAgICByZXR1cm4gdmFsLl9fZm5fXztcbiAgfVxuICBpZiAodmFsICYmIHZhbC5fX2ZwbHVnaW5fXykge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbn1cbiJdfQ==